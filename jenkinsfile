pipeline {
    agent any
	stages
	{            
		stage('Four') {
			parallel {
				stage('Code Build') {
					steps {
						sh 'dotnet publish "ContractActivationService/ContractActivationService/ContractActivationService.csproj" -c Release -o app/publish'
						
						sh 'dotnet publish "ContractModificationService/ContractModificationService.csproj" -c Release -o app/publish'
						
						sh 'dotnet publish "PublicApiGateway/PublicApiGateway.csproj" -c Release -o app/publish'
												
						sh 'dotnet publish "Microflows/MicroflowsConfiguration/MicroflowsConfiguration.csproj" -c Release -o app/publish'
						
						sh 'docker compose up --build -d'
						
					}
					
				}
			}
		}
	}
}